import{S as E,s as k,H as b,I as j,D as w,e as R,r as o,v as A,E as _,a as p,R as N,j as m}from"./main-BNgP4cYw.js";import{a as L,d as P,b as V}from"./createLucideIcon-CyiQfnON.js";var $=class extends E{#e;#r=void 0;#t;#s;constructor(s,t){super(),this.#e=s,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const t=this.options;this.options=this.#e.defaultMutationOptions(s),k(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),t?.mutationKey&&this.options.mutationKey&&b(t.mutationKey)!==b(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#i(s)}getCurrentResult(){return this.#r}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#n(),this.#i()}mutate(s,t){return this.#s=t,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(s)}#n(){const s=this.#t?.state??j();this.#r={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){w.batch(()=>{if(this.#s&&this.hasListeners()){const t=this.#r.variables,e=this.#r.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#s.onSuccess?.(s.data,t,e,r),this.#s.onSettled?.(s.data,null,t,e,r)):s?.type==="error"&&(this.#s.onError?.(s.error,t,e,r),this.#s.onSettled?.(void 0,s.error,t,e,r))}this.listeners.forEach(t=>{t(this.#r)})})}};function X(s,t){const e=R(),[r]=o.useState(()=>new $(e,s));o.useEffect(()=>{r.setOptions(s)},[r,s]);const i=o.useSyncExternalStore(o.useCallback(l=>r.subscribe(w.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),n=o.useCallback((l,u)=>{r.mutate(l,u).catch(A)},[r]);if(i.error&&_(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:n,mutateAsync:i.mutate}}const D=(s,t)=>{let e;return e=t.map(r=>`${s}=${r}`),e.join("&")},U=(s,t)=>{let r=Object.keys(t).map(i=>{const n=t[i];return n&&n.length?Array.isArray(n)?D(i,n):`${i}=${t[i]}`:n?`${i}=${t[i]}`:""}).filter(i=>i.length).filter(i=>i).join("&");return r?s+"?"+r:s};class z{authStatusCodes=[401,403,404,422];authErrorURLs=["/auth/login"];_fetchType;constructor(t="json"){this._fetchType=t}configureAuthorization(t){let e=p.get("token")||"";t.headers.Authorization="Bearer "+e}setHeader(t){t.headers={}}setDefaultHeaders(t){t.headers=t.headers||{},!t.headers["Content-Type"]&&!(t.body instanceof FormData)&&(t.headers["Content-Type"]="application/json")}checkToLogOutOrNot(t){return this.authErrorURLs.some(e=>t.includes(e))}isAuthRequest(t){return this.authErrorURLs.includes(t)}async refreshAccessToken(){const t=p.get("refreshToken");if(!t)return window.location.href="/",null;try{const e=await fetch("https://dev-api-ats.up.railway.app/v1.0/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(!e.ok)return p.remove("token"),p.remove("refreshToken"),window.location.href="/",null;const r=await e.json();return p.set("token",r.access_token),r.access_token}catch{return window.location.href="/",null}}async hit(...t){let[e,r]=t;r.headers=r.headers||{},r.headers["Content-Type"]||this.setDefaultHeaders(r),this.isAuthRequest(e)||this.configureAuthorization(r);let i="https://dev-api-ats.up.railway.app/v1.0"+e,n=await fetch(i,r);if(!n.ok){if(n.status===401&&!this.checkToLogOutOrNot(e)){const a=await this.refreshAccessToken();a&&(r.headers.Authorization="Bearer "+a,n=await fetch(i,r))}if(this.authStatusCodes.includes(n.status)&&!this.checkToLogOutOrNot(e)){const a=n.headers.get("Content-Type")||"";let c;try{c=a.includes("text/html")?await n.text():await n.json()}catch{c={message:n.statusText}}throw console.log(c),{success:!1,status:n.status,data:c,message:n.statusText}}const l=n.headers.get("Content-Type")||"";let u;try{u=l.includes("text/html")?await n.text():await n.json()}catch{u={message:n.statusText}}let h=new Error(u.message||n.statusText);throw h.data=u,h.status=n.status,h}return this._fetchType==="response"?n:(n.headers.get("Content-Type")||"").includes("text/html")?{success:!0,status:n.status,data:await n.text()}:{success:!0,status:n.status,data:await n.json()}}async post(t,e){return await this.hit(t,{method:"POST",body:e?JSON.stringify(e):void 0})}async postFormData(t,e){return await this.hit(t,{method:"POST",body:e})}async get(t,e={},r){Object.keys(e).length&&(t=U(t,e));const i={method:"GET"};return this.setDefaultHeaders(i),r&&(i.headers["Content-Type"]=r,i.headers.Accept=r),this.hit(t,i)}async delete(t,e={}){return this.hit(t,{method:"DELETE",body:JSON.stringify(e)})}async deleteWithOutPayload(t){return this.hit(t,{method:"DELETE"})}async put(t,e={}){return this.hit(t,{method:"PUT",body:JSON.stringify(e)})}async patch(t,e={}){return this.hit(t,{method:"PATCH",body:JSON.stringify(e)})}}const tt=new z;var M=Symbol.for("react.lazy"),y=N[" use ".trim().toString()];function H(s){return typeof s=="object"&&s!==null&&"then"in s}function O(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===M&&"_payload"in s&&H(s._payload)}function K(s){const t=W(s),e=o.forwardRef((r,i)=>{let{children:n,...l}=r;O(n)&&typeof y=="function"&&(n=y(n._payload));const u=o.Children.toArray(n),h=u.find(F);if(h){const a=h.props.children,c=u.map(d=>d===h?o.Children.count(a)>1?o.Children.only(null):o.isValidElement(a)?a.props.children:null:d);return m.jsx(t,{...l,ref:i,children:o.isValidElement(a)?o.cloneElement(a,void 0,c):null})}return m.jsx(t,{...l,ref:i,children:n})});return e.displayName=`${s}.Slot`,e}var I=K("Slot");function W(s){const t=o.forwardRef((e,r)=>{let{children:i,...n}=e;if(O(i)&&typeof y=="function"&&(i=y(i._payload)),o.isValidElement(i)){const l=q(i),u=J(n,i.props);return i.type!==o.Fragment&&(u.ref=r?L(r,l):l),o.cloneElement(i,u)}return o.Children.count(i)>1?o.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var B=Symbol("radix.slottable");function F(s){return o.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===B}function J(s,t){const e={...t};for(const r in t){const i=s[r],n=t[r];/^on[A-Z]/.test(r)?i&&n?e[r]=(...u)=>{const h=n(...u);return i(...u),h}:i&&(e[r]=i):r==="style"?e[r]={...i,...n}:r==="className"&&(e[r]=[i,n].filter(Boolean).join(" "))}return{...s,...e}}function q(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}const x=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,T=P,Y=(s,t)=>e=>{var r;if(t?.variants==null)return T(s,e?.class,e?.className);const{variants:i,defaultVariants:n}=t,l=Object.keys(i).map(a=>{const c=e?.[a],d=n?.[a];if(c===null)return null;const f=x(c)||x(d);return i[a][f]}),u=e&&Object.entries(e).reduce((a,c)=>{let[d,f]=c;return f===void 0||(a[d]=f),a},{}),h=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((a,c)=>{let{class:d,className:f,...C}=c;return Object.entries(C).every(S=>{let[g,v]=S;return Array.isArray(v)?v.includes({...n,...u}[g]):{...n,...u}[g]===v})?[...a,d,f]:a},[]);return T(s,l,h,e?.class,e?.className)},Z=Y("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function et({className:s,variant:t,size:e,asChild:r=!1,...i}){const n=r?I:"button";return m.jsx(n,{"data-slot":"button",className:V(Z({variant:t,size:e,className:s})),...i})}export{tt as $,et as B,Y as a,Z as b,K as c,X as u};
