import{r as m,j as e,u as N,a as u}from"./main-BNgP4cYw.js";import{$ as S,B as P,u as k}from"./button-CvDLn6Uk.js";import{b as C,c as E}from"./card-ByGSDkCy.js";import{I as f}from"./input-xlrhOAfo.js";import{P as L}from"./Peepulagri-BQYajbu7.js";import{c as g}from"./createLucideIcon-CyiQfnON.js";import{L as _}from"./loader-circle-B6V1HC-7.js";const I=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],M=g("eye-off",I);const D=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O=g("eye",D),z=async({email:c,password:a})=>{try{return(await S.post("/auth/login",{email:c,password:a})).data}catch(i){throw i}};function A({onLogin:c,isLoading:a=!1,error:i="",clearError:r}){const[d,s]=m.useState(!1),[l,p]=m.useState(""),[x,w]=m.useState(""),[o,h]=m.useState({}),y=()=>{const t={};return l?/\S+@\S+\.\S+/.test(l)||(t.email="Email is invalid"):t.email="Email is required",x?x.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",t},j=t=>{t.preventDefault();const n=y();h(n),Object.keys(n).length===0&&c({email:l,password:x})},v=t=>{p(t),o.email&&h(n=>({...n,email:void 0})),i&&r&&r()},b=t=>{w(t),o.password&&h(n=>({...n,password:void 0})),i&&r&&r()};return e.jsx("div",{className:"relative overflow-hidden h-screen w-full bg-[url('/Login.webp')] bg-cover bg-fixed bg-no-repeat",children:e.jsx("div",{className:"absolute inset-0 grid grid-cols-2 items-center justify-items-center",children:e.jsx("div",{className:"w-full max-w-sm px-6",children:e.jsxs("div",{className:"space-y-4 flex flex-col justify-center",children:[e.jsx("div",{className:"flex justify-start mb-2",children:e.jsx(L,{className:"w-30 h-30 3xl:!w-24 3xl:!h-24"})}),e.jsxs("div",{className:"text-center lg:text-left mb-6",children:[e.jsx(C,{className:"text-3xl 3xl:text-4xl text-[#000] font-normal",children:"Login"}),e.jsx(E,{className:"mt-1 text-xs 3xl:text-sm text-[#333]",children:"Please Enter Login Details Below"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5 flex-1 max-w-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{id:"email",type:"email",placeholder:"Email",value:l,onChange:t=>v(t.target.value),className:"bg-white rounded-md py-2.5 px-3 w-full text-sm h-12",disabled:a}),o.email&&e.jsx("p",{className:"text-red-500 text-xs",children:o.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"password",type:d?"text":"password",placeholder:"Password",value:x,onChange:t=>b(t.target.value),className:"bg-white rounded-md py-2.5 px-3 pr-10 w-full text-sm !h-12",disabled:a}),e.jsx("button",{type:"button",onClick:()=>s(!d),className:"absolute inset-y-0 right-3 flex items-center text-gray-500 hover:text-gray-700",disabled:a,children:d?e.jsx(M,{size:20}):e.jsx(O,{size:20})})]}),o.password&&e.jsx("p",{className:"text-red-500 text-xs",children:o.password})]}),i&&e.jsx("div",{className:"text-red-600 text-sm",children:i}),e.jsx("div",{className:"pt-2",children:e.jsx(P,{type:"submit",disabled:a,className:"w-full py-2.5 bg-[#45A845] hover:bg-[#3c903c] h-12 text-white text-base 3xl:!text-lg rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"LOG IN"})})]})]})})})})}function B(){const[c,a]=m.useState(""),i=N(),{mutate:r,isPending:d}=k({mutationFn:({email:s,password:l})=>z({email:s,password:l}),onSuccess:s=>{s?.success&&(s?.data?.access_token&&u.set("token",s?.data?.access_token),s?.data?.user&&(u.set("user_data",JSON.stringify(s.data.user)),s.data.user.name&&u.set("name",s.data.user.name),s.data.user.user_type&&u.set("user_type",s.data.user.user_type)),i({to:"/applicants"}),a(""))},onError:s=>{a(s?.data?.errData?.email?.[0]||s?.message||"Something went wrong")}});return e.jsx(A,{onLogin:r,isLoading:d,error:c,clearError:()=>a("")})}const V=B;export{V as component};
